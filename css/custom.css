/* === 通用：让 MathJax/KaTeX 生成的元素不超出页面 === */

/* 让 MathJax v3 (chtml/svg) 的容器可横向滚动并限制宽度 */
mjx-container,
mjx-container.MathJax,
.MathJax,
.mjx-chtml,
.mjx-svg {
  display: block !important;
  max-width: 100% !important;
  overflow-x: auto !important;         /* 可横向滑动 */
  overflow-y: hidden !important;
  -webkit-overflow-scrolling: touch;   /* iOS 平滑滚动 */
  box-sizing: border-box !important;
}

/* 针对 MathJax 生成的 svg 与 chtml 内部元素 */
mjx-container > svg,
.mjx-chtml svg,
.mjx-svg svg {
  max-width: 100% !important;
  height: auto !important;
}

/* KaTeX 显式类 */
.katex,
.katex * {
  box-sizing: border-box !important;
}
.katex-display,
.katex {
  display: block !important;
  max-width: 100% !important;
  overflow-x: auto !important;
  -webkit-overflow-scrolling: touch;
}

/* 让行内公式允许换行（避免固定 white-space 导致溢出） */
.katex, .katex-inline, .math.inline, span.math.inline, mjx-container[display="inline"] {
  white-space: normal !important;
  word-break: break-word !important;
}

/* 如果有内联 style 限制 max-width/max-height，强制覆盖 */
.comment_notes img,
.katex img,
.mjx-chtml img,
.mjx-svg img,
mjx-container img,
.katex svg{
  max-width:100% !important;
  max-height: none !important;
}

/* 小屏字体缩放（可选）——让超长公式在手机上更紧凑 */
@media (max-width: 600px) {
  .MathJax, .katex, mjx-container, .katex-display {
    font-size: 0.92em !important;
  }
}

